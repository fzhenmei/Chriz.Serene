(function(){"use strict";var e={};global.Serenity=global.Serenity||{};global.Serenity.ComponentModel=global.Serenity.ComponentModel||{};ss.initAssembly(e,"Serenity.Script.Core");var t=function(){};t.__typeName="Q";t.$blockUIWithCheck=function(e){if(t.$blockUICount>0){t.$blockUICount++;return}$.blockUI(e);t.$blockUICount++};t.blockUI=function(e){e=$.extend({baseZ:2e3,message:"",overlayCSS:{opacity:"0.0",zIndex:2e3,cursor:"wait"},fadeOut:0},e);if(e.useTimeout){window.setTimeout(function(){t.$blockUIWithCheck(e)},0)}else{t.$blockUIWithCheck(e)}};t.blockUndo=function(){if(t.$blockUICount>1){t.$blockUICount--;return}t.$blockUICount--;$.unblockUI({fadeOut:0})};t.formatDate=function(e,t){if(ss.staticEquals(e,null)){return""}if(ss.isNullOrUndefined(t)){t=i.dateFormat}var n=function(e){return ss.padLeftString(e.toString(),2,48)};return t.replace(new RegExp("dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|fff|zz?z?|\\/","g"),function(t){switch(t){case"/":{return i.dateSeparator}case"hh":{return n(e.getHours()<13?e.getHours():e.getHours()-12)}case"h":{return e.getHours()<13?e.getHours():e.getHours()-12}case"HH":{return n(e.getHours())}case"H":{return e.getHours()}case"mm":{return n(e.getMinutes())}case"m":{return e.getMinutes()}case"ss":{return n(e.getSeconds())}case"s":{return e.getSeconds()}case"yyyy":{return e.getFullYear()}case"yy":{return e.getFullYear().toString().substr(2,4)}case"dddd":{return ss.cast(e.GetDayName(),String)}case"ddd":{return ss.cast(e.GetDayName(true),String)}case"dd":{return n(e.getDate())}case"d":{return e.getDate().toString()}case"MM":{return n(e.getMonth()+1)}case"M":{return e.getMonth()+1}case"t":{return e.getHours()<12?"A":"P"}case"tt":{return e.getHours()<12?"AM":"PM"}case"fff":{return ss.padLeftString(e.getMilliseconds().toString(),3,48)}case"zzz":case"zz":case"z":{return""}default:{return t}}})};t.tryCatch=function(e,t){if(ss.staticEquals(e,null)){t();return}try{t()}catch(n){var i=ss.Exception.wrap(n);e(i)}};t.htmlEncode=function(e){var n=ss.isNullOrUndefined(e)?"":e.toString();if(new RegExp("[><&]","g").test(n)){return n.replace(new RegExp("[><&]","g"),t.$htmlEncodeReplacer)}return n};t.newBodyDiv=function(){return $("<div/>").appendTo(document.body)};t.$htmlEncodeReplacer=function(e){switch(e){case"&":{return"&amp;"}case">":{return"&gt;"}case"<":{return"&lt;"}}return e};t.clearOptions=function(e){e.html("")};t.addEmptyOption=function(e){t.addOption(e,"",y.EmptyItemText.get())};t.addOption=function(e,t,n){$("<option/>").val(t).text(n).appendTo(e)};t.findElementWithRelativeId=function(e,n){var i=e.attr("id");if(t.isEmptyOrNull(i)){return $("#"+n)}var r=$(i+n);if(r.length>0){return r}r=$(i+"_"+n);if(r.length>0){return r}while(true){var s=i.lastIndexOf(String.fromCharCode(95));if(s<=0){return $("#"+n)}i=i.substr(0,s);r=$("#"+i+"_"+n);if(r.length>0){return r}}};t.outerHtml=function(e){return $("<i/>").append(e.eq(0).clone()).html()};t.layoutFillHeightValue=function(e){var t=0;e.parent().children().not(e).each(function(e,n){var i=$(n);if(i.is(":visible")){t+=i.outerHeight(true)}});t=e.parent().height()-t;if(e.css("box-sizing")!=="border-box"){t=t-(e.outerHeight(true)-e.height())}return t};t.layoutFillHeight=function(e){var n=t.layoutFillHeightValue(e);var i=n+"px";if(!ss.referenceEquals(e.css("height"),i)){e.css("height",i)}};t.initFullHeightGridPage=function(e){$("body").addClass("full-height-page");e.addClass("responsive-height");var n=function(){var n=e.parent().hasClass("page-content")||e.parent().is("section.content");if(n){e.css("height","1px").css("overflow","hidden")}t.layoutFillHeight(e);if(n){e.css("overflow","")}e.triggerHandler("layout")};if($("body").hasClass("has-layout-event")){$("body").bind("layout",n)}else if(!!ss.isValue(window.window.Metronic)){window.window.Metronic.addResizeHandler(n)}else{$(window).resize(n)}n(null)};t.addFullHeightResizeHandler=function(e){$("body").addClass("full-height-page");var t=function(){var t;try{t=parseInt(ss.coalesce($(".page-content").css("min-height"),"0"))-parseInt(ss.coalesce($(".page-content").css("padding-top"),"0"))-parseInt(ss.coalesce($(".page-content").css("padding-bottom"),"0"))}catch(n){t=100}e(t)};if(!!ss.isValue(window.window.Metronic)){window.window.Metronic.addResizeHandler(t)}else{$(window).resize(t)}t(null)};t.triggerLayoutOnShow=function(e){R.executeEverytimeWhenShown(e,function(){e.triggerHandler("layout")},true)};t.autoFullHeight=function(e){e.css("height","100%");t.triggerLayoutOnShow(e)};t.notifyWarning=function(e){toastr.warning(e,"",t.$getToastrOptions())};t.notifySuccess=function(e){toastr.success(e,"",t.$getToastrOptions())};t.notifyInfo=function(e){toastr.info(e,"",t.$getToastrOptions())};t.notifyError=function(e){toastr.error(e,"",t.$getToastrOptions())};t.positionToastContainer=function(e){if(!!ss.isNullOrUndefined(window.window.toastr)){return}var t=$(window.document.body).children(".ui-dialog:visible").last();var n=toastr.getContainer(null,e);if(n.length===0){return}if(t.length>0){var i=t.position();n.addClass("positioned-toast toast-top-full-width");n.css({position:"absolute",top:i.top+28+"px",left:i.left+6+"px",width:t.width()-12+"px"})}else{n.addClass("toast-top-full-width");if(n.hasClass("positioned-toast")){n.removeClass("positioned-toast");n.css({position:"",top:"",left:"",width:""})}}};t.$getToastrOptions=function(){var e={timeOut:3e3,showDuration:250,hideDuration:500,extendedTimeOut:500,positionClass:"toast-top-full-width"};t.positionToastContainer(true);return e};t.getRemoteData=function(e){return l.ensure("RemoteData."+e)};t.getRemoteDataAsync=function(e){return l.ensureAsync("RemoteData."+e)};t.getLookup=function(e){return l.ensure("Lookup."+e)};t.getLookupAsync=function(e){return l.ensureAsync("Lookup."+e)};t.reloadLookup=function(e){l.reload("Lookup."+e)};t.reloadLookupAsync=function(e){return l.reloadAsync("Lookup."+e)};t.getColumns=function(e){return l.ensure("Columns."+e)};t.getColumnsAsync=function(e){return l.ensureAsync("Columns."+e)};t.getForm=function(e){return l.ensure("Form."+e)};t.getFormAsync=function(e){return l.ensureAsync("Form."+e)};t.getTemplate=function(e){return l.ensure("Template."+e)};t.getTemplateAsync=function(e){return l.ensureAsync("Template."+e)};t.canLoadScriptData=function(e){return l.canLoad(e)};t.serviceCall=function(e){var i=function(t){if(!ss.staticEquals(n.notLoggedInHandler,null)&&ss.isValue(t)&&ss.isValue(t.Error)&&t.Error.Code==="NotLoggedIn"&&n.notLoggedInHandler(e,t)){return}if(!ss.staticEquals(e.onError,null)){e.onError(t)}else{r.showServiceError(t.Error)}};e=$.extend({dataType:"json",contentType:"application/json",type:"POST",cache:false,blockUI:true,url:ss.isValue(e.service)&&!ss.startsWithString(e.service,String.fromCharCode(126))&&!ss.startsWithString(e.service,String.fromCharCode(47))?t.resolveUrl("~/services/"+e.service):t.resolveUrl(e.service),data:$.toJSON(e.request),success:function(n,i,r){var s=n;try{if(ss.isNullOrUndefined(s.Error)){if(!ss.staticEquals(e.onSuccess,null)){e.onSuccess(s)}}else{}}finally{if(e.blockUI){t.blockUndo()}if(!ss.staticEquals(e.onCleanup,null)){e.onCleanup()}}},error:function(n,r,s){try{if(n.status===403){var a=null;try{a=n.getResponseHeader("Location")}catch(l){a=null}if(ss.isValue(a)){window.top.location.href=a;return}}if(ss.coalesce(n.getResponseHeader("content-type"),"").toLowerCase().indexOf("application/json")>=0){var o=$.parseJSON(n.responseText);if(ss.isValue(o)&&ss.isValue(o.Error)){i(o);return}}var u=n.responseText;Q.iframeDialog({html:u})}finally{if(e.blockUI){t.blockUndo()}if(!ss.staticEquals(e.onCleanup,null)){e.onCleanup()}}}},e);if(e.blockUI){t.blockUI(null)}return $.ajax(e)};t.serviceRequest=function(e,n,i,r){return t.serviceCall($.extend({service:e,request:n,onSuccess:i},r))};t.setEquality=function(e,t,n){if(ss.isNullOrUndefined(e.EqualityFilter)){e.EqualityFilter={}}e.EqualityFilter[t]=n};t.trim=function(e){return ss.coalesce(e,"").replace(new RegExp("^\\s+|\\s+$","g"),"")};t.isEmptyOrNull=function(e){return ss.isNullOrUndefined(e)||e.length===0};t.isTrimmedEmpty=function(e){return ss.isNullOrUndefined(t.trimToNull(e))};t.trimToNull=function(e){if(ss.isNullOrUndefined(e)||e.length===0){return null}else{e=e.trim();if(e.length===0){return null}else{return e}}};t.trimToEmpty=function(e){if(ss.isNullOrUndefined(e)||e.length===0){return""}else{return e.trim()}};t.toSingleLine=function(e){return ss.replaceAllString(ss.replaceAllString(t.trimToEmpty(e),"\r\n"," "),"\n"," ").trim()};t.text=function(e){var t=a.$table[e];if(ss.isNullOrUndefined(t)){t=ss.coalesce(e,"")}return t};t.tryGetText=function(e){return a.$table[e]};t.resolveUrl=function(e){if(ss.isValue(e)&&e.length>0&&e.substr(0,2)==="~/"){return n.applicationPath+e.substr(2)}else{return e}};t.autoOpenByQuery=function(e,t){var n=Q.parseQueryString();var i=n[e];if(ss.isValue(i)){t(i)}};t.autoOpenByQueryID=function(e,n){t.autoOpenByQuery(e,function(e){var t=V.convertToId(e);if(ss.isNullOrUndefined(t)||isNaN(t)){return}n(ss.unbox(t))})};global.Q=t;var n=function(){};n.__typeName="Q$Config";global.Q$Config=n;var i=function(){};i.__typeName="Q$Culture";i.get_groupSeperator=function(){return i.decimalSeparator===","?".":","};global.Q$Culture=i;var r=function(){};r.__typeName="Q$ErrorHandling";r.showServiceError=function(e){if(ss.isNullOrUndefined(e)){throw new ss.Exception("error is null!")}var t;if(ss.isNullOrUndefined(e)){t="??ERROR??"}else{var n=e.Message;if(ss.isNullOrUndefined(n)){n=e.Code}t=n}Q.alert(t)};global.Q$ErrorHandling=r;var s=function(e,t){this.$items=null;this.$itemById=null;this.$options=null;this.$items=[];this.$itemById={};this.$options=e||{};if(ss.isValue(t)){this.update(t)}};s.__typeName="Q$Lookup";global.Q$Lookup=s;var a=function(e){this.$key=null;this.$key=e};a.__typeName="Q$LT";a.add=function(e,t){if(!ss.isValue(e)){return}t=ss.coalesce(t,"");var n=ss.getEnumerator(Object.keys(e));try{while(n.moveNext()){var i=n.current();var r=t+i;var s=e[i];if(typeof s==="object"){a.add(s,r+".")}else{a.$table[r]=s}}}finally{n.dispose()}};a.initializeTextClass=function(e,t){var n=e;var i=ss.arrayClone(Object.keys(e));for(var r=0;r<i.length;r++){var s=i[r];var l=n[s];if(ss.isInstanceOfType(l,a)){var o=l;var u=t+s;a.$table[u]=o.$key;n[s]=new a(u)}}};a.getDefault=function(e,t){var n=a.$table[e];if(ss.isNullOrUndefined(n)){var i=t;if(ss.isNullOrUndefined(i)){i=ss.coalesce(e,"")}n=i}return n};global.Q$LT=a;var l=function(){};l.__typeName="Q$ScriptData";l.bindToChange=function(e,t,n){$(document.body).bind("scriptdatachange."+t,function(t,i){if(ss.referenceEquals(i,e)){n()}})};l.triggerChange=function(e){$(document.body).triggerHandler("scriptdatachange",[e])};l.unbindFromChange=function(e){$(document.body).unbind("scriptdatachange."+e)};l.$syncLoadScript=function(e){$.ajax({async:false,cache:true,type:"GET",url:e,data:null,dataType:"script"})};l.$loadScriptAsync=function(e){return RSVP.resolve().then(function(){t.blockUI(null);return RSVP.resolve($.ajax({async:true,cache:true,type:"GET",url:e,data:null,dataType:"script"}).always(t.blockUndo))},null)};l.$loadScriptData=function(e){if(!ss.keyExists(l.$registered,e)){throw new ss.Exception(ss.formatString("Script data {0} is not found in registered script list!",e))}e=e+".js?"+l.$registered[e];l.$syncLoadScript(t.resolveUrl("~/DynJS.axd/")+e)};l.$loadScriptDataAsync=function(e){return RSVP.resolve().then(function(){if(!ss.keyExists(l.$registered,e)){throw new ss.Exception(ss.formatString("Script data {0} is not found in registered script list!",e))}e=e+".js?"+l.$registered[e];return l.$loadScriptAsync(t.resolveUrl("~/DynJS.axd/")+e)},null)};l.ensure=function(e){var t=l.$loadedData[e];if(!ss.isValue(t)){l.$loadScriptData(e)}t=l.$loadedData[e];if(!ss.isValue(t)){throw new ss.NotSupportedException(ss.formatString("Can't load script data: {0}!",e))}return t};l.ensureAsync=function(e){return RSVP.resolve().then(function(){var t=l.$loadedData[e];if(ss.isValue(t)){return RSVP.resolve(t)}return l.$loadScriptDataAsync(e).then(function(){t=l.$loadedData[e];if(!ss.isValue(t)){throw new ss.NotSupportedException(ss.formatString("Can't load script data: {0}!",e))}return t},null)},null)};l.reload=function(e){if(!ss.keyExists(l.$registered,e)){throw new ss.NotSupportedException(ss.formatString("Script data {0} is not found in registered script list!"))}l.$registered[e]=(new Date).getTime().toString();l.$loadScriptData(e);var t=l.$loadedData[e];return t};l.reloadAsync=function(e){return RSVP.resolve().then(function(){if(!ss.keyExists(l.$registered,e)){throw new ss.NotSupportedException(ss.formatString("Script data {0} is not found in registered script list!"))}l.$registered[e]=(new Date).getTime().toString();return l.$loadScriptDataAsync(e).then(function(){return l.$loadedData[e]},null)},null)};l.canLoad=function(e){var t=l.$loadedData[e];if(ss.isValue(t)||ss.keyExists(l.$registered,e)){return true}return false};l.setRegisteredScripts=function(e){ss.clearKeys(l.$registered);var t=new ss.ObjectEnumerator(e);try{while(t.moveNext()){var n=t.current();l.$registered[n.key]=n.value.toString()}}finally{t.dispose()}};l.set=function(e,t){l.$loadedData[e]=t;l.triggerChange(e)};global.Q$ScriptData=l;var o=function(){};o.__typeName="Texts";global.Texts=o;var u=function(){};u.__typeName="Texts$Controls";global.Texts$Controls=u;var c=function(){};c.__typeName="Texts$Controls$EntityDialog";global.Texts$Controls$EntityDialog=c;var f=function(){};f.__typeName="Texts$Controls$EntityGrid";global.Texts$Controls$EntityGrid=f;var d=function(){};d.__typeName="Texts$Controls$Pager";global.Texts$Controls$Pager=d;var p=function(){};p.__typeName="Texts$Controls$PropertyGrid";global.Texts$Controls$PropertyGrid=p;var m=function(){};m.__typeName="Texts$Controls$QuickSearch";global.Texts$Controls$QuickSearch=m;var y=function(){};y.__typeName="Texts$Controls$SelectEditor";global.Texts$Controls$SelectEditor=y;var g=function(){};g.__typeName="Texts$Dialogs";global.Texts$Dialogs=g;var h=function(){this.$1$FalseTextField=null;this.$1$TrueTextField=null};h.__typeName="Serenity.BooleanFormatter";global.Serenity.BooleanFormatter=h;var v=function(){};v.__typeName="Serenity.CheckboxFormatter";global.Serenity.CheckboxFormatter=v;var S=function(e){this.$2$ValueField=null;this.set_value(e)};S.__typeName="Serenity.ColumnsKeyAttribute";global.Serenity.ColumnsKeyAttribute=S;var b=function(){};b.__typeName="Serenity.Criteria";b.isEmpty=function(e){var t=e;return t.length===0||t.length===1&&ss.isInstanceOfType(t[0],String)&&ss.cast(t[0],String).length===0};b.join=function(e,t,n){if(ss.referenceEquals(null,e)||Serenity.Criteria.isEmpty(e)){return n}if(ss.referenceEquals(null,n)||Serenity.Criteria.isEmpty(n)){return e}return[e,t,n]};b.paren=function(e){if(!Serenity.Criteria.isEmpty(e)){return["()",e]}return e};global.Serenity.Criteria=b;var T=function(){this.$1$DisplayFormatField=null;this.set_displayFormat(i.dateFormat)};T.__typeName="Serenity.DateFormatter";T.format=function(e,n){if(!ss.isValue(e)){return""}var i;if(typeof e==="date"){i=e}else if(typeof e==="string"){i=Q.parseISODateTime(e);if(ss.staticEquals(i,null)){return t.htmlEncode(e)}}else{return e.toString()}return t.htmlEncode(t.formatDate(i,n))};global.Serenity.DateFormatter=T;var _=function(){T.call(this);this.set_displayFormat(i.dateTimeFormat)};_.__typeName="Serenity.DateTimeFormatter";global.Serenity.DateTimeFormatter=_;var C=function(e){this.$2$ValueField=null;this.set_value(e)};C.__typeName="Serenity.DialogTypeAttribute";global.Serenity.DialogTypeAttribute=C;var F=function(){this.$2$KeyField=null};F.__typeName="Serenity.EditorAttribute";global.Serenity.EditorAttribute=F;var w=function(e){this.$html=null;this.$html=e};w.__typeName="Serenity.ElementAttribute";global.Serenity.ElementAttribute=w;var N=function(e){this.$2$ValueField=null;this.set_value(e)};N.__typeName="Serenity.EntityTypeAttribute";global.Serenity.EntityTypeAttribute=N;var x=function(){this.$1$EnumKeyField=null};x.__typeName="Serenity.EnumFormatter";x.format=function(e,t){if(!ss.isValue(t)){return""}var n;try{n=ss.Enum.toString(e,t)}catch(i){i=ss.Exception.wrap(i);if(ss.isInstanceOfType(i,ss.ArgumentException)){n=t.toString()}else{throw i}}var r=ss.getAttributes(e,E,false);var s=r.length>0?ss.cast(r[0],E).get_value():ss.getTypeFullName(e);return x.getText$1(s,n)};x.getText$1=function(e,n){return t.htmlEncode(ss.coalesce(t.tryGetText("Enums."+e+"."+n),n))};x.getText=function(e){return function(t){if(!ss.isValue(t)){return""}return x.format(e,ss.unbox(t))}};x.getName=function(e){return function(t){if(!ss.isValue(t)){return""}return ss.Enum.toString(e,ss.unbox(t))}};global.Serenity.EnumFormatter=x;var E=function(e){this.$2$ValueField=null;this.set_value(e)};E.__typeName="Serenity.EnumKeyAttribute";global.Serenity.EnumKeyAttribute=E;var O=function(){};O.__typeName="Serenity.EnumTypeRegistry";O.get=function(e){if(ss.isNullOrUndefined(O.$knownTypes)){O.$knownTypes={};var t=ss.getAssemblies();for(var i=0;i<t.length;i++){var r=t[i];var s=ss.getAssemblyTypes(r);for(var a=0;a<s.length;a++){var l=s[a];if(ss.isEnum(l)){var o=ss.getTypeFullName(l);O.$knownTypes[o]=l;var u=ss.getAttributes(l,E,false);if(ss.isValue(u)&&u.length>0){O.$knownTypes[ss.cast(u[0],E).get_value()]=l}for(var c=0;c<n.rootNamespaces.length;c++){var f=n.rootNamespaces[c];if(ss.startsWithString(o,f+".")){O.$knownTypes[o.substr(f.length+1)]=l}}}}}}if(!ss.keyExists(O.$knownTypes,e)){throw new ss.Exception(ss.formatString("Can't find {0} enum type!",e))}return O.$knownTypes[e]};global.Serenity.EnumTypeRegistry=O;var I=function(){this.$1$DisplayFormatField=null;this.$1$OriginalNamePropertyField=null};I.__typeName="Serenity.FileDownloadFormatter";I.dbFileUrl=function(e){e=ss.replaceAllString(ss.coalesce(e,""),"\\","/");return t.resolveUrl("~/upload/")+e};global.Serenity.FileDownloadFormatter=I;var k=function(){};k.__typeName="Serenity.FlexifyAttribute";global.Serenity.FlexifyAttribute=k;var D=function(e){this.$2$ValueField=null;this.set_value(e)};D.__typeName="Serenity.FormKeyAttribute";global.Serenity.FormKeyAttribute=D;var V=function(){};V.__typeName="Serenity.IdExtensions";V.convertToId=function(e){return Q.toId(e)};V.toInt32=function(e){return Q.toId(e)};V.isPositiveId=function(e){if(!ss.isValue(e)){return false}else if(typeof e==="string"){var t=e;if(ss.startsWithString(t,"-")){return false}return t.length>0}else if(typeof e==="number"){return e>0}else{return true}};V.isNegativeId=function(e){if(!ss.isValue(e)){return false}else if(typeof e==="string"){var t=e;if(ss.startsWithString(t,"-")){return true}return false}else if(typeof e==="number"){return e<0}else{return false}};global.Serenity.IdExtensions=V;var A=function(e){this.$2$ValueField=null;this.set_value(e)};A.__typeName="Serenity.IdPropertyAttribute";global.Serenity.IdPropertyAttribute=A;var L=function(){};L.__typeName="Serenity.IInitializeColumn";global.Serenity.IInitializeColumn=L;var U=function(e){this.$2$ValueField=null;this.set_value(e)};U.__typeName="Serenity.IsActivePropertyAttribute";global.Serenity.IsActivePropertyAttribute=U;var P=function(){};P.__typeName="Serenity.ISlickFormatter";global.Serenity.ISlickFormatter=P;var H=function(e){this.$2$ValueField=null;this.set_value(e)};H.__typeName="Serenity.ItemNameAttribute";global.Serenity.ItemNameAttribute=H;var R=function(){};R.__typeName="Serenity.LazyLoadHelper";R.executeOnceWhenShown=function(e,t){R.$autoIncrement++;var n="ExecuteOnceWhenShown"+R.$autoIncrement;var i=false;if(e.is(":visible")){t()}else{var r=e.closest(".ui-tabs");if(r.length>0){r.bind("tabsshow."+n,function(s){if(e.is(":visible")){r.unbind("tabsshow."+n);if(!i){i=true;e.unbind("shown."+n);t()}}})}var s;if(e.hasClass("ui-dialog")){s=e.children(".ui-dialog-content")}else{s=e.closest(".ui-dialog-content")}if(s.length>0){s.bind("dialogopen."+n,function(){s.unbind("dialogopen."+n);if(e.is(":visible")&&!i){i=true;e.unbind("shown."+n);t()}})}e.bind("shown."+n,function(){if(e.is(":visible")){e.unbind("shown."+n);if(!i){i=true;t()}}})}};R.executeEverytimeWhenShown=function(e,t,n){R.$autoIncrement++;var i="ExecuteEverytimeWhenShown"+R.$autoIncrement;var r=e.is(":visible");if(r&&n){t()}var s=function(n){if(e.is(":visible")){if(!r){r=true;t()}}else{r=false}};var a=e.closest(".ui-tabs");if(a.length>0){a.bind("tabsactivate."+i,s)}var l=e.closest(".ui-dialog-content");if(l.length>0){l.bind("dialogopen."+i,s)}e.bind("shown."+i,s)};global.Serenity.LazyLoadHelper=R;var z=function(e){this.$2$ValueField=null;this.set_value(e)};z.__typeName="Serenity.LocalTextPrefixAttribute";global.Serenity.LocalTextPrefixAttribute=z;var B=function(){};B.__typeName="Serenity.MaximizableAttribute";global.Serenity.MaximizableAttribute=B;var M=function(){};M.__typeName="Serenity.MinuteFormatter";M.format=function(e){var t=ss.Int32.trunc(Math.floor(e/60));var n=e-t*60;var i,r;if(!ss.isValue(e)||isNaN(e)){return""}if(t<10){i="0"+t}else{i=t.toString()}if(n<10){r="0"+n}else{r=n.toString()}return ss.formatString("{0}:{1}",i,r)};global.Serenity.MinuteFormatter=M;var q=function(e){this.$2$ValueField=null;this.set_value(e)};q.__typeName="Serenity.NamePropertyAttribute";global.Serenity.NamePropertyAttribute=q;var K=function(){this.$1$DisplayFormatField=null};K.__typeName="Serenity.NumberFormatter";K.format=function(e,n){n=ss.coalesce(n,"0.##");if(!ss.isValue(e)){return""}if(typeof e==="number"){if(isNaN(e)){return""}return t.htmlEncode(Q.formatNumber(e,n))}var i=Q.parseDecimal(e.toString());if(ss.isNullOrUndefined(i)){return""}return t.htmlEncode(e.toString())};global.Serenity.NumberFormatter=K;var j=function(e){this.$2$OptionsTypeField=null;this.set_optionsType(e)};j.__typeName="Serenity.OptionsTypeAttribute";global.Serenity.OptionsTypeAttribute=j;var W=function(){};W.__typeName="Serenity.PanelAttribute";global.Serenity.PanelAttribute=W;var G=function(){};G.__typeName="Serenity.ResizableAttribute";global.Serenity.ResizableAttribute=G;var Y=function(){};Y.__typeName="Serenity.ScriptContext";global.Serenity.ScriptContext=Y;var J=function(e){this.$2$ValueField=null;this.set_value(e)};J.__typeName="Serenity.ServiceAttribute";global.Serenity.ServiceAttribute=J;var Z=function(){};Z.__typeName="Serenity.SlickFormatting";Z.getEnumText=function(e){return function(t){return x.getText(e).call(null,t)}};Z.getEnumText$1=function(e,t){return x.getText$1(e,t)};Z.enum$1=function(e){return function(n){if(ss.isValue(n.value)){return t.htmlEncode(t.text("Enums."+e+"."+n.value))}else{return""}}};Z.treeToggle=function(e){return function(t,n,i){return function(r){var s=i(r);var a=t();var l=ss.coalesce(r.item._indent,0);var o='<span class="s-TreeIndent" style="width:'+15*l+'px"></span>';var u=n(ss.cast(r.item,e));var c=a.getIdxById(u);var f=a.getItemByIdx(c+1);if(!!ss.isValue(f)){var d=ss.coalesce(f._indent,0);if(d>l){if(!!!!r.item._collapsed){return o+'<span class="s-TreeToggle s-TreeExpand"></span>'+s}else{return o+'<span class="s-TreeToggle s-TreeCollapse"></span>'+s}}}return o+'<span class="s-TreeToggle"></span>'+s}}};Z.date=function(e){var n=e;if(ss.isNullOrUndefined(n)){n=i.dateFormat}e=n;return function(n){return t.htmlEncode(T.format(n.value,e))}};Z.dateTime=function(e){var n=e;if(ss.isNullOrUndefined(n)){n=i.dateTimeFormat}e=n;return function(n){return t.htmlEncode(T.format(n.value,e))}};Z.checkBox=function(){return function(e){return'<span class="check-box no-float '+(!!e.value?" checked":"")+'"></span>'}};Z.number=function(e){return function(t){return K.format(t.value,e)}};Z.getItemType$1=function(e){return ss.safeCast(e.data("item-type"),String)};Z.getItemType=function(e){if(t.isEmptyOrNull(e)){return null}if(ss.startsWithString(e,"#")){e=e.substr(1)}var n=e.lastIndexOf(String.fromCharCode(47));if(n>=0){e=e.substr(0,n)}return e};Z.getItemId$1=function(e){var t=e.data("item-id");return ss.isNullOrUndefined(t)?null:t.toString()};Z.getItemId=function(e){if(t.isEmptyOrNull(e)){return null}if(ss.startsWithString(e,"#")){e=e.substr(1)}var n=e.lastIndexOf(String.fromCharCode(47));if(n>=0){e=e.substr(n+1)}return e};Z.itemLinkText=function(e,n,i,r,s){return"<a"+(ss.isValue(n)?' href="#'+ss.replaceAllString(e,".","-")+"/"+n+'"':"")+' data-item-type="'+e+'"'+' data-item-id="'+n+'"'+' class="s-EditLink s-'+ss.replaceAllString(e,".","-")+"Link"+(t.isEmptyOrNull(r)?"":" "+r)+'">'+(s?t.htmlEncode(ss.coalesce(i,"")):ss.coalesce(i,""))+"</a>"};Z.itemLink=function(e,t,n,i,r){return function(s){return ss.cast(Z.itemLinkText(e,s.item[t],ss.staticEquals(n,null)?s.value:n(s),ss.staticEquals(i,null)?"":i(s),r),String)}};global.Serenity.SlickFormatting=Z;var X=function(){};X.__typeName="Serenity.SlickHelper";X.setDefaults=function(e,n){var i=ss.getEnumerator(e);try{while(i.moveNext()){var r=i.current();r.sortable=ss.isValue(r.sortable)?r.sortable:true;var s=r.id;if(ss.isNullOrUndefined(s)){s=r.field}r.id=s;if(ss.isValue(n)&&ss.isValue(r.id)&&(ss.isNullOrUndefined(r.name)||ss.startsWithString(r.name,"~"))){var a=ss.isValue(r.name)?r.name.substr(1):r.id;r.name=t.text(n+a)}if(ss.staticEquals(r.formatter,null)&&!ss.staticEquals(r.format,null)){r.formatter=X.convertToFormatter(r.format)}else if(ss.staticEquals(r.formatter,null)){r.formatter=function(e,n,i,r,s){return t.htmlEncode(i)}}}}finally{i.dispose()}return e};X.convertToFormatter=function(e){if(ss.staticEquals(e,null)){return null}else{return function(t,n,i,r,s){return e({row:t,cell:n,value:i,column:r,item:s})}}};global.Serenity.SlickHelper=X;var et=function(){};et.__typeName="Serenity.SlickTreeHelper";et.filterCustom=function(e,t){var n=t(e);var i=0;while(ss.isValue(n)){if(!!n._collapsed){return false}n=t(n);if(i++>1e3){throw new ss.InvalidOperationException("Possible infinite loop, check parents has no circular reference!")}}return true};et.filterById=function(e,t,n){return et.filterCustom(e,function(e){var i=n(e);if(ss.isNullOrUndefined(i)){return null}return t.getItemById(i)})};et.setCollapsed=function(e,t){if(ss.isValue(e)){var n=ss.getEnumerator(e);try{while(n.moveNext()){var i=n.current();i._collapsed=t}}finally{n.dispose()}}};et.setCollapsedFlag=function(e,t){e._collapsed=t};et.setIndents=function(e,t,n,i){var r=0;var s={};for(var a=0;a<ss.count(e);a++){var l=ss.getItem(e,a);if(a>0){var o=n(l);if(ss.isValue(o)&&ss.referenceEquals(o,t(ss.getItem(e,a-1)))){r+=1}else if(ss.isNullOrUndefined(o)){r=0}else if(!ss.referenceEquals(o,n(ss.getItem(e,a-1)))){if(ss.keyExists(s,o)){r=s[o]+1}else{r=0}}}s[t(l)]=r;l._indent=r;if(ss.isValue(i)){l._collapsed=ss.unbox(i)}}};et.toggleClick=function(e){return function(t,n,i,r,s){var a=$(t.target);if(!a.hasClass("s-TreeToggle")){return}if(a.hasClass("s-TreeCollapse")||a.hasClass("s-TreeExpand")){var l=r.rows[n];if(!!ss.isValue(l)){if(!!!l._collapsed){l._collapsed=true}else{l._collapsed=false}r.updateItem(s(ss.cast(l,e)),l)}if(t.shiftKey){r.beginUpdate();try{et.setCollapsed(r.getItems(),!!l._collapsed);r.setItems(r.getItems(),true)}finally{r.endUpdate()}}}}};global.Serenity.SlickTreeHelper=et;var tt=function(){};tt.__typeName="Serenity.TabsExtensions";tt.setDisabled=function(e,t,n){if(ss.isNullOrUndefined(e)){return}var i=tt.indexByKey(e);if(ss.isNullOrUndefined(i)){return}var r=i[t];if(ss.isNullOrUndefined(r)){return}if(ss.unbox(r)===e.tabs("option","active")){e.tabs("option","active",0)}if(n){e.tabs("disable",ss.unbox(r))}else{e.tabs("enable",ss.unbox(r))}};tt.activeTabKey=function(e){var t=e.children("ul").children("li").eq(e.tabs("option","active")).children("a").attr("href").toString();var n="_Tab";var i=t.lastIndexOf(n);if(i>=0){t=t.substr(i+n.length)}return t};tt.indexByKey=function(e){var t=e.data("indexByKey");if(ss.isNullOrUndefined(t)){t={};e.children("ul").children("li").children("a").each(function(e,n){var i=n.getAttribute("href").toString();var r="_Tab";var s=i.lastIndexOf(r);if(s>=0){i=i.substr(s+r.length)}t[i]=e});e.data("indexByKey",t)}return t};global.Serenity.TabsExtensions=tt;var nt=function(){};nt.__typeName="Serenity.UrlFormatter";global.Serenity.UrlFormatter=nt;var it=function(){};it.__typeName="Serenity.ComponentModel.OptionAttribute";global.Serenity.ComponentModel.OptionAttribute=it;ss.initClass(t,e,{});ss.initClass(n,e,{});ss.initClass(i,e,{});ss.initClass(r,e,{});ss.initClass(s,e,{update:function(e){this.$items=[];this.$itemById={};if(ss.isValue(e)){ss.arrayAddRange(this.$items,e)}var n=this.$options.idField;if(!t.isEmptyOrNull(n)){for(var i=0;i<this.$items.length;i++){var r=this.$items[i];var s=r[n];if(ss.isValue(s)){this.$itemById[s]=r}}}},get_idField:function(){return this.$options.idField},get_parentIdField:function(){return this.$options.parentIdField},get_textField:function(){return this.$options.textField},get_textFormatter:function(){return this.$options.textFormatter},get_itemById:function(){return this.$itemById},get_items:function(){return this.$items}});ss.initClass(a,e,{get:function(){var e=a.$table[this.$key];if(ss.isNullOrUndefined(e)){e=ss.coalesce(this.$key,"")}return e},toString:function(){var e=a.$table[this.$key];if(ss.isNullOrUndefined(e)){e=ss.coalesce(this.$key,"")}return e}});ss.initClass(l,e,{});ss.initClass(o,e,{});ss.initClass(u,e,{});ss.initClass(c,e,{});ss.initClass(f,e,{});ss.initClass(d,e,{});ss.initClass(p,e,{});ss.initClass(m,e,{});ss.initClass(y,e,{});ss.initClass(g,e,{});ss.initInterface(P,e,{format:null});ss.initClass(h,e,{format:function(e){if(!ss.isValue(e.value)){return""}if(!!e.value){var n=t.tryGetText(this.get_trueText());if(ss.isNullOrUndefined(n)){var i=this.get_trueText();if(ss.isNullOrUndefined(i)){i=ss.coalesce(t.tryGetText("Dialogs.YesButton"),"Yes")}n=i}return t.htmlEncode(n)}var r=t.tryGetText(this.get_falseText());if(ss.isNullOrUndefined(r)){var s=this.get_falseText();if(ss.isNullOrUndefined(s)){s=ss.coalesce(t.tryGetText("Dialogs.NoButton"),"No")}r=s}return t.htmlEncode(r)},get_falseText:function(){return this.$1$FalseTextField},set_falseText:function(e){this.$1$FalseTextField=e},get_trueText:function(){return this.$1$TrueTextField},set_trueText:function(e){this.$1$TrueTextField=e}},null,[P]);ss.initClass(v,e,{format:function(e){return'<span class="check-box no-float readonly '+(!!e.value?" checked":"")+'"></span>'}},null,[P]);ss.initClass(S,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(b,e,{});ss.initClass(T,e,{get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},format:function(e){return T.format(e.value,this.get_displayFormat())}},null,[P]);ss.initClass(_,e,{},T,[P]);ss.initClass(C,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(F,e,{get_key:function(){return this.$2$KeyField},set_key:function(e){this.$2$KeyField=e}});ss.initClass(w,e,{get_html:function(){return this.$html}});ss.initClass(N,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(x,e,{get_enumKey:function(){return this.$1$EnumKeyField},set_enumKey:function(e){this.$1$EnumKeyField=e},format:function(e){return x.format(O.get(this.get_enumKey()),e.value)}},null,[P]);ss.initClass(E,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(O,e,{});ss.initInterface(L,e,{initializeColumn:null});ss.initClass(I,e,{format:function(e){var n=ss.safeCast(e.value,String);if(ss.isNullOrEmptyString(n)){return""}var i=I.dbFileUrl(n);var r=!ss.isNullOrEmptyString(this.get_originalNameProperty())?ss.safeCast(e.item[this.get_originalNameProperty()],String):null;r=ss.coalesce(r,"");var s=ss.formatString(ss.coalesce(this.get_displayFormat(),"{0}"),r,n,i);return"<a class='file-download-link' target='_blank' href='"+t.htmlEncode(i)+"'>"+t.htmlEncode(s)+"</a>"},get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},get_originalNameProperty:function(){return this.$1$OriginalNamePropertyField},set_originalNameProperty:function(e){this.$1$OriginalNamePropertyField=e},initializeColumn:function(e){e.referencedFields=e.referencedFields||[];if(!ss.isNullOrEmptyString(this.get_originalNameProperty())){e.referencedFields.push(this.get_originalNameProperty());
return}}},null,[P,L]);ss.initClass(k,e,{});ss.initClass(D,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(V,e,{});ss.initClass(A,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(U,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(H,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(R,e,{});ss.initClass(z,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(B,e,{});ss.initClass(M,e,{format:function(e){return M.format(e.value)}},null,[P]);ss.initClass(q,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(K,e,{get_displayFormat:function(){return this.$1$DisplayFormatField},set_displayFormat:function(e){this.$1$DisplayFormatField=e},format:function(e){return K.format(e.value,this.get_displayFormat())}},null,[P]);ss.initClass(j,e,{get_optionsType:function(){return this.$2$OptionsTypeField},set_optionsType:function(e){this.$2$OptionsTypeField=e}});ss.initClass(W,e,{});ss.initClass(G,e,{});ss.initClass(Y,e,{});ss.initClass(J,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(Z,e,{});ss.initClass(X,e,{});ss.initClass(et,e,{});ss.initClass(tt,e,{});ss.initClass(nt,e,{format:function(e){return"<a href='"+t.htmlEncode(e.value)+"'>"+t.htmlEncode(e.value)+"</a>"}},null,[P]);ss.initClass(it,e,{});ss.setMetadata(h,{members:[{attr:[new it],name:"FalseText",type:16,returnType:String,getter:{name:"get_FalseText",type:8,sname:"get_falseText",returnType:String,params:[]},setter:{name:"set_FalseText",type:8,sname:"set_falseText",returnType:Object,params:[String]}},{attr:[new it],name:"TrueText",type:16,returnType:String,getter:{name:"get_TrueText",type:8,sname:"get_trueText",returnType:String,params:[]},setter:{name:"set_TrueText",type:8,sname:"set_trueText",returnType:Object,params:[String]}}]});ss.setMetadata(T,{members:[{attr:[new it],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}}]});ss.setMetadata(x,{members:[{attr:[new it],name:"EnumKey",type:16,returnType:String,getter:{name:"get_EnumKey",type:8,sname:"get_enumKey",returnType:String,params:[]},setter:{name:"set_EnumKey",type:8,sname:"set_enumKey",returnType:Object,params:[String]}}]});ss.setMetadata(I,{members:[{attr:[new it],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}},{attr:[new it],name:"OriginalNameProperty",type:16,returnType:String,getter:{name:"get_OriginalNameProperty",type:8,sname:"get_originalNameProperty",returnType:String,params:[]},setter:{name:"set_OriginalNameProperty",type:8,sname:"set_originalNameProperty",returnType:Object,params:[String]}}]});ss.setMetadata(K,{members:[{attr:[new it],name:"DisplayFormat",type:16,returnType:String,getter:{name:"get_DisplayFormat",type:8,sname:"get_displayFormat",returnType:String,params:[]},setter:{name:"set_DisplayFormat",type:8,sname:"set_displayFormat",returnType:Object,params:[String]}}]});(function(){a.$table={};a.empty=new a("")})();(function(){y.EmptyItemText=new Q$LT("--select--");y.InplaceAdd=new Q$LT("Define New");y.InplaceEdit=new Q$LT("Edit");y.ClickToDefine=new Q$LT("*** Click to define a new one ***");y.NoResultsClickToDefine=new Q$LT("*** No results. Click to define a new one ***");a.initializeTextClass(y,"Controls.SelectEditor.")})();(function(){R.$autoIncrement=0})();(function(){n.applicationPath="/";n.emailAllowOnlyAscii=false;n.rootNamespaces=null;n.notLoggedInHandler=null;var e=$("link#ApplicationPath");if(e.length>0){n.applicationPath=e.attr("href")}n.rootNamespaces=[];n.rootNamespaces.push("Serenity");n.emailAllowOnlyAscii=true})();(function(){t.$blockUICount=0;var e=window.window;var n=e.RSVP;if(!!(ss.isValue(n)&&ss.isValue(n.on))){n.on("error",function(t){e.console.log(t);e.console.log(!!ss.isValue(t.get_stack)?t.get_stack():t.stack)})}e["Q$Externals"]=e.Q})();(function(){i.decimalSeparator=".";i.dateSeparator="/";i.dateOrder="dmy";i.dateFormat="dd/MM/yyyy";i.dateTimeFormat="dd/MM/yyyy HH:mm:ss";var e=t.trimToNull($("script#ScriptCulture").html());if(ss.isValue(e)){var n=$.parseJSON(e);var r=n.DecimalSeparator;if(ss.isNullOrUndefined(r)){r=i.decimalSeparator}i.decimalSeparator=r;var s=n.DateSeparator;if(ss.isNullOrUndefined(s)){s=i.dateSeparator}i.dateSeparator=s;var a=n.DateOrder;if(ss.isNullOrUndefined(a)){a=i.dateOrder}i.dateOrder=a;var l=n.DateFormat;if(ss.isNullOrUndefined(l)){l=i.dateFormat}i.dateFormat=l;var o=n.DateTimeFormat;if(ss.isNullOrUndefined(o)){o=i.dateTimeFormat}i.dateTimeFormat=o}})();(function(){l.$registered={};l.$loadedData={}})();(function(){c.DeleteConfirmation=new Q$LT("Delete record?");c.UndeleteButton=new Q$LT("Undelete");c.UndeleteConfirmation=new Q$LT("Undelete record?");c.CloneButton=new Q$LT("Clone");c.SaveSuccessMessage=new Q$LT("Save success");c.SaveButton=new Q$LT("Save");c.UpdateButton=new Q$LT("Update");c.ApplyChangesButton=new Q$LT("Apply Changes");c.DeleteButton=new Q$LT("Delete");c.LocalizationButton=new Q$LT("Localization");c.LocalizationBack=new Q$LT("Back to Form");c.LocalizationConfirmation=new Q$LT("Save changes to translations?");c.NewRecordTitle=new Q$LT("New {0}");c.EditRecordTitle=new Q$LT("Edit {0}{1}");a.initializeTextClass(c,"Controls.EntityDialog.")})();(function(){f.NewButton=new Q$LT("New {0}");f.RefreshButton=new Q$LT("Refresh");f.IncludeDeletedToggle=new Q$LT("display inactive records");a.initializeTextClass(f,"Controls.EntityGrid.")})();(function(){d.Page=new Q$LT("Page");d.PageStatus=new Q$LT("Showing {from} to {to} of {total} total records");d.NoRowStatus=new Q$LT("No records");d.LoadingStatus=new Q$LT("Please wait, loading data...");d.DefaultLoadError=new Q$LT("An error occured while loading data!");a.initializeTextClass(d,"Controls.Pager.")})();(function(){p.DefaultCategory=new Q$LT("Properties");p.RequiredHint=new Q$LT("this field is required");a.initializeTextClass(p,"Controls.PropertyGrid.")})();(function(){m.Placeholder=new Q$LT("search...");m.Hint=new Q$LT("enter the text to search for...");m.FieldSelection=new Q$LT("select the field to search on");a.initializeTextClass(m,"Controls.QuickSearch.")})();(function(){g.OkButton=new Q$LT("OK");g.YesButton=new Q$LT("Yes");g.NoButton=new Q$LT("No");g.CancelButton=new Q$LT("Cancel");g.AlertTitle=new Q$LT("Alert");g.ConfirmationTitle=new Q$LT("Confirm");g.InformationTitle=new Q$LT("Information");g.WarningTitle=new Q$LT("Warning");a.initializeTextClass(g,"Dialogs.")})();(function(){O.$knownTypes=null})()})();