var Q;(function(t){function e(t,e){var n=t.toString();while(n.length<e)n="0"+e;return n}t.zeroPad=e;function n(t){if(t===0)return"0";else if(!t)return"";var n=Math.floor(t/24/60);var r="";if(n>0){r+=n.toString()}var i=e(Math.floor(t%(24*60)/60),2)+":"+e(t%60,2);if(i!="00:00"){if(n>0)r+=".";r+=i}return r}t.formatDayHourAndMin=n;function r(t){if(t==null)return"";var e=function(t){return(t<10?"0":"")+t};var n=t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes());var r=Number(t.getUTCSeconds()+"."+(t.getUTCMilliseconds()<100?"0":"")+e(t.getUTCMilliseconds()));n+=":"+e(r)+"Z";return n}t.formatISODateTimeUTC=r;function i(t,e,n,r){var i="-";if(isNaN(t)){return null}n=n||Q$Culture.decimalSeparator;r=r||Q$Culture.get_groupSeperator();var o="";if(e.indexOf(".")>-1){var l=n;var s=e.substring(e.lastIndexOf(".")+1);t=a(t,s.length);var u=t%1;var d=new String(u.toFixed(s.length));d=d.substring(d.lastIndexOf(".")+1);for(var f=0;f<s.length;f++){if(s.charAt(f)=="#"&&d.charAt(f)!="0"){l+=d.charAt(f);continue}else if(s.charAt(f)=="#"&&d.charAt(f)=="0"){var c=d.substring(f);if(c.match("[1-9]")){l+=d.charAt(f);continue}else break}else if(s.charAt(f)=="0")l+=d.charAt(f);else l+=s.charAt(f)}o+=l}else t=Math.round(t);var h=Math.floor(t);if(t<0)h=Math.ceil(t);var g="";if(e.indexOf(".")==-1)g=e;else g=e.substring(0,e.indexOf("."));var p="";if(!(h==0&&g.substr(g.length-1)=="#")){var v=new String(Math.abs(h));var m=9999;if(g.lastIndexOf(",")!=-1)m=g.length-g.lastIndexOf(",")-1;var $=0;for(var f=v.length-1;f>-1;f--){p=v.charAt(f)+p;$++;if($==m&&f!=0){p=r+p;$=0}}if(g.length>p.length){var y=g.indexOf("0");if(y!=-1){var x=g.length-y;var b=g.length-p.length-1;while(p.length<x){var w=g.charAt(b);if(w==",")w=r;p=w+p;b--}}}}if(!p&&g.indexOf("0",g.length-1)!==-1)p="0";o=p+o;if(t<0)o=i+o;if(o.lastIndexOf(n)==o.length-1){o=o.substring(0,o.length-1)}return o}t.formatNumber=i;function a(t,e){var n=Math.pow(10,e||0);var r=(Math.round(t*n)/n).toString();if(e>0){var i=r.indexOf(".");if(i==-1){r+=".";i=0}else{i=r.length-(i+1)}while(i<e){r+="0";i++}}return parseFloat(r)}var o=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function l(e){e=t.trim(e.toString());var n=Q$Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(n)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+n+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!/^[-\+]?\d+$/.test(e))return NaN;return parseInt(e,10)}function s(t,e){if(!t||!t.length)return null;var n;var r;var i,a,o;r=d(t);if(!r)return false;if(r.length==3){e=e||Q$Culture.dateOrder;switch(e){case"dmy":i=parseInt(r[0],10);a=parseInt(r[1],10)-1;o=parseInt(r[2],10);break;case"ymd":i=parseInt(r[2],10);a=parseInt(r[1],10)-1;o=parseInt(r[0],10);break;case"mdy":default:i=parseInt(r[1],10);a=parseInt(r[0],10)-1;o=parseInt(r[2],10);break}if(isNaN(i)||isNaN(a)||isNaN(o)||i<1||i>31||a<0||a>11||o>9999||o<0)return false;if(o<100){var l=(new Date).getFullYear();var s=l%100+10;o+=l-l%100+(o<=s?0:-100)}try{n=new Date(o,a,i);if(isNaN(n.getFullYear()))return false}catch(u){return false}}else if(r.length==1){try{n=new Date(r[0]);if(isNaN(n.getFullYear()))return false}catch(u){return false}}return n}t.parseDate=s;function u(e){if(e==null)return null;e=t.trim(e.toString());if(e.length==0)return null;var n=Q$Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(n)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+n+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!new RegExp("^\\s*([-\\+])?(\\d*)\\"+Q$Culture.decimalSeparator+"?(\\d*)\\s*$").test(e))return NaN;return parseFloat(e.toString().replace(Q$Culture.decimalSeparator,"."))}t.parseDecimal=u;function d(e){e=t.trim(e);if(!e.length)return;if(e.indexOf("/")>=0)return e.split("/");else if(e.indexOf(".")>=0)return e.split(".");else if(e.indexOf("-")>=0)return e.split("-");else if(e.indexOf("\\")>=0)return e.split("\\");else return[e]}t.splitDateString=d;function f(t){if(!t||!t.length)return null;var e=Date.parse(t);if(!isNaN(e)&&typeof e=="Date")return e;t=t+"";if(typeof t!="string"||t.length===0){return null}var n=t.match(o);if(typeof n=="undefined"||n===null){return null}var r,i,a,l,s,u,d;r=parseInt(n[1],10);if(typeof n[2]=="undefined"||n[2]===""){return new Date(r)}i=parseInt(n[2],10)-1;a=parseInt(n[3],10);if(typeof n[4]=="undefined"||n[4]===""){return new Date(r,i,a)}l=parseInt(n[4],10);s=parseInt(n[5],10);u=typeof n[6]!="undefined"&&n[6]!==""?parseInt(n[6],10):0;if(typeof n[7]!="undefined"&&n[7]!==""){d=Math.round(1e3*parseFloat("0."+n[7]))}else{d=0}if((typeof n[8]=="undefined"||n[8]==="")&&(typeof n[9]=="undefined"||n[9]==="")){return new Date(r,i,a,l,s,u,d)}var f;if(typeof n[9]!="undefined"&&n[9]!==""){f=parseInt(n[10],10)*36e5;if(typeof n[11]!="undefined"&&n[11]!==""){f+=parseInt(n[11],10)*6e4}if(n[9]=="-"){f=-f}}else{f=0}return new Date(Date.UTC(r,i,a,l,s,u,d)-f)}t.parseISODateTime=f;function c(e){var n=t.trim(e);if(n.length<4||n.length>5)return NaN;var r,i;if(n.charAt(1)==":"){r=l(n.substr(0,1));i=l(n.substr(2,2))}else{if(n.charAt(2)!=":")return NaN;r=l(n.substr(0,2));i=l(n.substr(3,2))}if(isNaN(r)||isNaN(i)||r<0||r>23||i<0||i>59)return NaN;return r*60+i}t.parseHourAndMin=c;function h(e){var n;var r=t.trim(e);if(!r)return NaN;var i=r.split(".");if(i.length==0||i.length>2)return NaN;if(i.length==1){n=l(i[0]);if(!isNaN(n))return n*24*60;return c(i[0])}else{n=l(i[0]);var a=c(i[1]);if(isNaN(n)||isNaN(a))return NaN;return n*24*60+a}}t.parseDayHourAndMin=h;function g(t){var e;if(arguments.length==0)e=location.search.substring(1,location.search.length);else e=t||"";var n={};var r=e.split("&");for(var i=0;i<r.length;i++){var a=r[i].split("=");var o=decodeURIComponent(a[0]);n[o]=a.length>=2?decodeURIComponent(a[1]):o}return n}t.parseQueryString=g;var p;function v(t,e){var n="AaBbCcÇçFfGgĞğHhIıİiJjKkLlMmNnOoÖöPpRrSsŞşTtUuÜüVvYyZz";t=t||"";e=e||"";if(t==e)return 0;if(!p){p={};for(var r=0;r<n.length;r++){p[n.charAt(r)]=r+1}}for(var i=0,a=Math.min(t.length,e.length);i<a;i++){var o=t.charAt(i),l=e.charAt(i);if(o===l)continue;var s=p[o],u=p[l];if(s!=null&&u!=null)return s<u?-1:1;var d=o.localeCompare(l);if(d==0)continue;return d}return t.localeCompare(e)}t.turkishLocaleCompare=v;function m(t){if(!t)return t;return t.replace(/i/g,"İ").replace(/ı/g,"I").toUpperCase()}t.turkishLocaleToUpper=m;function y(e,n){var r;n=$.extend({htmlEncode:true,okButton:t.text("Dialogs.OkButton"),title:t.text("Dialogs.AlertTitle"),onClose:null,onOpen:null,autoOpen:false,dialogClass:"s-MessageDialog s-AlertDialog",modal:true,width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(n.onOpen)n.onOpen.call(this)},close:function(){r.dialog("destroy");if(n.onClose)n.onClose()}},n);if(n.htmlEncode)e=t.htmlEncode(e);if(!n.buttons){var i=[];i.push({text:n.okButton,click:function(){r.dialog("close")}});n.buttons=i}r=$('<div><div class="message"></div></div>').dialog(n).children(".message").html(e).parent().dialog("open")}t.alert=y;function x(e,n,r){var i;r=$.extend({htmlEncode:true,yesButton:t.text("Dialogs.YesButton"),noButton:t.text("Dialogs.NoButton"),title:t.text("Dialogs.ConfirmationTitle"),onNo:null,onCancel:null,onClose:null,autoOpen:false,modal:true,dialogClass:"s-MessageDialog s-ConfirmDialog",width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(r.onOpen)r.onOpen.call(this)},close:function(){i.dialog("destroy");if(!a&&r.onCancel)r.onCancel()},overlay:{opacity:.77,background:"black"}},r);if(r.htmlEncode)e=t.htmlEncode(e);var a=false;if(!r.buttons){var o=[];o.push({text:r.yesButton,click:function(){a=true;i.dialog("close");if(n)n()}});if(r.noButton)o.push({text:r.noButton,click:function(){a=true;i.dialog("close");if(r.onNo)r.onNo();else if(r.onCancel)r.onCancel()}});r.buttons=o}i=$('<div><div class="message"></div></div>').dialog(r).children(".message").html(e).parent().dialog("open")}t.confirm=x;function b(e,n){y(e,$.extend({title:t.text("Dialogs.WarningTitle"),dialogClass:"s-MessageDialog s-WarningDialog"},n))}t.warning=b;function w(e,n,r){x(e,n,$.extend({title:t.text("Dialogs.InformationTitle"),dialogClass:"s-MessageDialog s-InformationDialog",yesButton:t.text("Dialogs.OkButton"),noButton:null},r))}t.information=w;function N(e){var n;var r=$("<div><iframe></iframe></div>");var i=$.extend({autoOpen:true,modal:true,width:"60%",height:"400",title:t.text("Dialogs.AlertTitle"),open:function(){n=r.find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;n.open();n.write(i.html);n.close()},close:function(){n.open();n.write("");n.close();r.dialog("destroy").html("")}},e);r.dialog(i)}t.iframeDialog=N;function C(t){if(t==null)return null;if(typeof t=="number")return t;t=$.trim(t);if(t==null||!t.length)return null;if(t.length>=15)return t;var e=parseInt(t,10);if(isNaN(e))return t;return e}t.toId=C;var I;function D(t,e){I.call(this,t,e);this.errorsFor(t).each(function(e,n){if($(t).hasClass("error"))$(n).removeClass("checked");$(n).attr("title",$(n).text())})}function O(){Serenity.CustomValidation.registerValidationMethods();var e=$.validator;e=e.prototype;I=e.showLabel;e.showLabel=D;jQuery.validator.addMethod("xss",function(t,e){if(t.length==0)return true;var n=0;while(true){var r=t.indexOf("&",n);if(r<0)r=t.indexOf("<",n);if(r<0)return true;if(r==t.length-1)return true;var i=t.charAt(r);var a=t.charAt(r+1);if(i!="&"){if(i=="<"&&(a>="a"&&a<="z"||a>="A"&&a<="Z"||a=="!"||a=="/"))return false}else if(a=="#")return false;n=r+1}});$.validator.addMethod("dateQ",function(t,e){return this.optional(e)||s(t)!=false});$.validator.addMethod("hourAndMin",function(t,e){return this.optional(e)||!isNaN(c(t))});$.validator.addMethod("dayHourAndMin",function(t,e){return this.optional(e)||!isNaN(h(t))});$.validator.addMethod("decimalQ",function(t,e){return this.optional(e)||!isNaN(u(t))});$.validator.addMethod("integerQ",function(t,e){return this.optional(e)||!isNaN(l(t))});var n=$.validator.methods["email"];$.validator.addMethod("email",function(t,e){if(!Q$Config.emailAllowOnlyAscii)return n.call(this,t,e);return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)});$.validator.addMethod("emailMultiple",function(t,e){var n=this.optional(e);if(n)return n;if(t.indexOf(";")>=0)t=t.split(";");else t=t.split(",");for(var r=0;r<t.length;r++){n=$.validator.methods["email"].call(this,t[r],e);if(!n)return n}return n});$.validator.addMethod("anyvalue",function(t,e){return true});var r=$.validator.defaults;r.ignoreTitle=true;r.onchange=function(t){this.element(t)};e.oldinit=e.init;e.init=function(){e.oldinit.call(this);function t(t){if(this.form==null)return;var e=$.data(this.form,"validator"),n="on"+t.type.replace(/^validate/,"");e&&e.settings[n]&&e.settings[n].call(e,this)}function n(e){var n=this[0];if(!$.data(n,"changebound")){$(n).change(t);$.data(n,"changebound",true)}}$(this.currentForm).on(":text, :password, :file, select, textarea","focusin.validate",n)};e.oldfocusInvalid=e.focusInvalid;e.focusInvalid=function(){if(this.settings.abortHandler)this.settings.abortHandler(this);this.oldfocusInvalid.call(this)};e.oldstopRequest=e.focusInvalid;e.stopRequest=function(t,e){var n=this.formSubmitted;this.oldfocusInvalid.call(this,[t,e]);if(!e&&this.pendingRequest==0&&n&&this.settings.abortHandler){this.settings.abortHandler(this)}};e.resetAll=function(){this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)};jQuery(function(){$.extend($.validator.messages,{email:t.text("Validation.Email"),required:t.text("Validation.Required"),minlength:t.text("Validation.MinLength"),maxlength:t.text("Validation.MaxLength"),digits:t.text("Validation.Digits"),range:t.text("Validation.Range"),xss:t.text("Validation.Xss"),dateQ:t.text("Validation.DateInvalid"),decimalQ:t.text("Validation.Decimal"),integerQ:t.text("Validation.Integer"),url:t.text("Validation.Url")})})}function A(t){t.settings.abortHandler=null;t.settings.submitHandler=function(){return false}}t.validatorAbortHandler=A;function M(e){return $.extend({ignore:":hidden",meta:"v",errorClass:"error",errorPlacement:function(t,e){var n=null;var r=e.attr("data-vx-id");if(r){n=$("#"+r);if(!n.length)n=null;else n=n[0]}if(n==null){n=e.parents("div.field");if(n.length){var i=$("div.vx",n[0]);if(i.length)n=i[0]}else n=e.parent()}t.appendTo(n)},submitHandler:function(){return false},invalidHandler:function(){t.notifyError(t.text("Validation.InvalidFormMessage"))},success:function(t){t.addClass("checked")}},e)}t.validateOptions=M;if(window["jQuery"]&&window["jQuery"]["validator"])O();else if(window["jQuery"]){jQuery(function(t){if(t.validator)O()})}function T(){var e=Q$Culture.dateOrder;var n=Q$Culture.dateSeparator;var r=($("html").attr("lang")||"en").toLowerCase();if(!$.datepicker.regional[r]){r=r.split("-")[0];if(!$.datepicker.regional[r]){r="en"}}$.datepicker.setDefaults($.datepicker.regional["en"]);$.datepicker.setDefaults($.datepicker.regional[r]);$.datepicker.setDefaults({dateFormat:e=="mdy"?"mm"+n+"dd"+n+"yy":e=="ymd"?"yy"+n+"mm"+n+"dd":"dd"+n+"mm"+n+"yy",buttonImage:t.resolveUrl("~/content/serenity/images/datepicker.png"),buttonImageOnly:true,showOn:"both",showButtonPanel:true,changeMonth:true,changeYear:true})}if(window["jQuery"]&&window["jQuery"]["datepicker"]&&window["jQuery"]["datepicker"]["regional"]&&window["jQuery"]["datepicker"]["regional"]["en"])T();else jQuery(function(t){if(t.datepicker)T()});function Q(){$.ui.dialog.prototype._allowInteraction=function(t){if($(t.target).closest(".ui-dialog").length){return true}return!!$(t.target).closest(".ui-datepicker, .select2-drop, .cke, .cke_dialog, #support-modal").length}}if(window["jQuery"]&&window["jQuery"]["ui"])Q();else jQuery(function(t){if(window["jQuery"]["ui"])Q()});function k(e){var n=$("<form/>").attr("method","POST").attr("action",e.url?t.resolveUrl(e.url):t.resolveUrl("~/services/"+e.service)).appendTo(document.body);if(e.target)n.attr("target",e.target);var r=$("<div/>").appendTo(n);$("<input/>").attr("type","hidden").attr("name","request").val($["toJSON"](e.request)).appendTo(r);$("<input/>").attr("type","submit").appendTo(r);n.submit();window.setTimeout(function(){n.remove()},0)}t.postToService=k;function S(e){var n=$("<form/>").attr("method","POST").attr("action",t.resolveUrl(e.url)).appendTo(document.body);if(e.target)n.attr("target",e.target);var r=$("<div/>").appendTo(n);if(e.params!=null){for(var i in e.params){$("<input/>").attr("type","hidden").attr("name",i).val(e.params[i]).appendTo(r)}}$("<input/>").attr("type","submit").appendTo(r);n.submit();window.setTimeout(function(){n.remove()},0)}t.postToUrl=S;function U(){ss.Exception.prototype.toString=function(){return this.get_message()}}if(ss&&ss.Exception)U();else jQuery(function(t){if(ss&&ss.Exception)U()});function j(t){var e=screen.availHeight-60;var n=screen.availWidth-10;var r=(screen.availWidth-n)/2-5;if(r<0)r=0;var i=(screen.availHeight-e)/2-25;if(i<0)i=0;var a=window.open("","","status=0, toolbar=0, width="+n+", height="+e+", scrollbars=1, resizable=yes, left="+r+", top="+i);a.document.body.innerHTML=t}t.showInFrame=j;if($.fn.button&&$.fn.button.noConflict){var H=$.fn.button.noConflict();$.fn.btn=H}function F(t,e){var n,r,i,a,o,l,s=arguments[0]||{},u=1,d=arguments.length;if(typeof s!=="object"&&!$.isFunction(s)){s={}}if(u===d){s={};u=0}for(;u<d;u++){if((n=arguments[u])!==null){if($.isArray(n)){s=$.extend(true,[],n)}else{for(r in n){i=s[r];a=n[r];if(s===a){continue}if(a&&($.isPlainObject(a)||(o=$.isArray(a)))){if(o){o=false;l=i&&$.isArray(i)?i:[]}else{l=i&&$.isPlainObject(i)?i:{}}s[r]=F(l,a)}else if(a!==undefined){s[r]=a}}}}}return s}t.deepClone=F})(Q||(Q={}));